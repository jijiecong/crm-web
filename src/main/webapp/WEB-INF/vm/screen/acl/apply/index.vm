<link href="$formLink/admin/media/css/bosco/list.css"
      rel="stylesheet" type="text/css">
<script src="http://g.tbcdn.cn/kissy/k/1.3.1/seed.js" data-config="{combine:true}"></script>

<div class="page-content">
    <div class="container-fluid">
        <div class="row-fluid">
            <div class="span12">
                <h3 class="page-title">申请管理</h3>
                <span>$!message</span>
            </div>
        </div>
        <div class="row-fluid margin-bottom-20 content-area">
            <div class="portlet box green">
                <div class="portlet-title">
                    <div class="actions" style="float: left">
                        <a href="#modal-form-box" data-toggle="modal" class="btn blue add-apply"><i
                                class="icon-pencil"></i>申请权限</a>
                        <a href="#modal-role-box" data-toggle="modal" class="btn blue apply-role"><i
                                class="icon-pencil"></i>申请角色</a>
                    </div>
                </div>
                <div class="portlet-body">
                    <table class="table table-condensed table-hover">
                        <thead>
                        <tr>
                            <th>编号</th>
                            <th>申请人</th>
                            <th>申请描述</th>
##                            <th>被申请权限</th>
                            <th>被申请权限/角色</th>
                            <th>审核状态</th>
                            <th>申请时间</th>
                        </tr>
                        </thead>
                        <tbody>
                            #foreach($basicVO in $basicVOList)
                            <tr class="u_$!basicVO.id">
                                <td>$!basicVO.id</td>
                                <td>$!basicVO.userName</td>
                                <td>$!basicVO.applyContent</td>
                                <td>$!basicVO.wantName</td>
                                <td>$!basicVO.approvalState</td>
                                <td>$dateUtils.format($!basicVO.applyTime,"yyyy-MM-dd HH:mm:ss")</td>
                            </tr>
                            #end
                        </tbody>
                    </table>
                </div>
            </div>
            #if ($totalCount > 0)
                <div class="pages" style="float:right">
                    #set($cpage = $pageUtil.pager($curPage, $pageSize, $totalCount))
				        #set($url = $formLink.setTarget('/acl/apply/index').addQueryData(
                    'searchTitle', "$!searchTitle").fork())
				   		#showPage($cpage $url)
                </div>
            #end
        </div>
    </div>


    <!--创建权限申请表单-->
    <div id="modal-form-box" class="modal hide fade" style="top:10%" tabindex="-1" role="dialog"
         aria-labelledby="myModalLabel1"
         aria-hidden="true">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
            <h3 class="operation-name">申请权限</h3>
        </div>
        <div class="modal-body" style="text-align: left;">
            <form id="form" method="post" class="form-horizontal">
                <table>
                    <tbody>
                    <tr>
                        <td>权限：</td>
                        <td><input id="select-privilege" name="wantId" type="text" class="m-wrap large"
                                    style="margin-bottom: 5px;"></td>
                    </tr>
                    <tr>
                        <td>申请理由：</td>
                        <td><input name="applyContent" placeholder="申请理由" type="text" class="m-wrap large"
                                   style="margin-bottom: 5px;"></td>
                    </tr>
                    </tbody>
                </table>
            </form>
        </div>
        <div class="modal-footer">
            <button class="btn" id="close-modal" data-dismiss="modal" aria-hidden="true">取消</button>
            <button id="modal-change-submit" class="operation-name btn yellow submit">确定</button>
        </div>
    </div>


    <!--创建角色申请表单-->
    <div id="modal-role-box" class="modal hide fade" style="top:10%" tabindex="-1" role="dialog"
         aria-labelledby="myModalLabel1"
         aria-hidden="true">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
            <h3 class="operation-name">申请角色</h3>
        </div>
        <div class="modal-body" style="text-align: left;">
            <form id="form1" method="post" class="form-horizontal">
                <table>
                    <tbody>
                    <tr>
                        <td>角色：</td>
                        <td><input id="select-role" name="wantId" type="text" class="m-wrap large" style="margin-bottom: 5px;"></td>
                    </tr>
                    <tr>
                        <td>申请理由：</td>
                        <td><input name="applyContent" placeholder="申请理由" type="text" class="m-wrap large" style="margin-bottom: 5px;"></td>
                    </tr>
                    </tbody>
                </table>
            </form>
        </div>
        <div class="modal-footer">
            <button class="btn" id="close-modal" data-dismiss="modal" aria-hidden="true">取消</button>
            <button id="modal-role-submit" class="operation-name btn yellow submit">确定</button>
        </div>
    </div>

</div>

<input type="hidden" id="selectedBasicRegion"/>
<script src="${formLink}/admin/media/js/select2.min.js" type="text/javascript"></script>
<script src="${formLink}/admin/media/js/jquery.multi-select.js" type="text/javascript"></script>
<script>
    seajs.use(["$formLink/admin/static/app/acl/apply/apply", "$formLink/admin/static/app/acl/ajaxSelect2"], function (main, select2) {
        main.init();
    });
</script>
